[TOC]

---

# Â§ ç¬¬äº”ç«  ç½‘ç»œå±‚: æŽ§åˆ¶å¹³é¢

## Â§ 5.1 æ¦‚è¿°

> ###### æŽ§åˆ¶å¹³é¢çš„ä¸¤ç§ä¸»è¦å®žçŽ°æ–¹æ³•
>
> 1. æ¯è·¯ç”±å™¨æŽ§åˆ¶
>     <left><img src="assets/image-20220523151238996.png" alt="image-20220523151238996" style="zoom: 33%;" /></left>
>
>     - æ¯å°è·¯ç”±å™¨éƒ½åŒ…å«è½¬å‘åŠŸèƒ½å’Œè·¯ç”±é€‰æ‹©åŠŸèƒ½;
>     - æ¯ä¸ªè·¯ç”±å™¨éƒ½æœ‰ä¸€ä¸ªè·¯ç”±é€‰æ‹©ç»„ä»¶, ç”¨äºŽ**ä¸Žå…¶ä»–è·¯ç”±å™¨ä¸­çš„è·¯ç”±é€‰æ‹©ç»„ä»¶é€šä¿¡**, ä»¥è®¡ç®—è½¬å‘è¡¨é¡¹;
>
>     - OSPF å’Œ BGP åè®®éƒ½æ˜¯åŸºäºŽè¿™ç§æ–¹æ³•è¿›è¡ŒæŽ§åˆ¶çš„;
>
> 2. é€»è¾‘é›†ä¸­å¼æŽ§åˆ¶
>     <left><img src="assets/image-20220523151341359.png" alt="image-20220523151341359" style="zoom:33%;" /></left>
>
>     - é‡‡ç”¨é€šç”¨çš„ "åŒ¹é…åŠ åŠ¨ä½œ" æŠ½è±¡, ç”±é€»è¾‘é›†ä¸­å¼æŽ§åˆ¶å™¨è´Ÿè´£è®¡ç®—å¹¶åˆ†å‘è½¬å‘è¡¨;
>     - ç»è¿‡ä¸€ç§å®šä¹‰å¥½çš„åè®®, æ¯å°è·¯ç”±å™¨ä¸ŽæŽ§åˆ¶ä»£ç† (CA) è¿›è¡Œäº¤äº’, è¿›è€Œé…ç½®å’Œç®¡ç†è½¬å‘è¡¨;
>         - æŽ§åˆ¶ä»£ç† (CA) çš„ä»»åŠ¡æ˜¯ä¸ŽæŽ§åˆ¶å™¨é€šä¿¡, å¹¶æŒ‰ç…§æŽ§åˆ¶å™¨çš„å‘½ä»¤æ‰§è¡Œç›¸åº”åŠ¨ä½œ;
>     - ä¸Ž "æ¯è·¯ç”±å™¨æŽ§åˆ¶" çš„å…³é”®å·®å¼‚:
>         - ä¸åŒ CA ä¹‹é—´**ä¸ç›´æŽ¥ç›¸äº’äº¤äº’**;
>         - CA **ä¸ä¸»åŠ¨å‚ä¸Ž**è½¬å‘è¡¨çš„**è®¡ç®—**;

---

## Â§ 5.2 è·¯ç”±é€‰æ‹©ç®—æ³• (routing algorithm)

> ###### æœ‰å…³è®¡ç®—æœºç½‘ç»œæŠ½è±¡å›¾æ¨¡åž‹çš„çº¦å®š
>
> - é“¾è·¯å¼€é”€çœ‹åšæ˜¯ç»™å®šçš„, ä¸å¿…å…³å¿ƒå®ƒæ˜¯å¦‚ä½•è®¡ç®—å¾—æ¥çš„;
> - åªè€ƒè™‘æ— å‘å›¾;
> - å¦‚æžœèŠ‚ç‚¹å¯¹ä¸å±žäºŽè¾¹é›† $E$ , åˆ™è¯¥èŠ‚ç‚¹å¯¹å¯¹åº”çš„ä»£ä»·ç½®ä¸º $\infty$ ;
>
> ---
>
> ###### ç›®çš„
>
> - ä»Žå‘é€æ–¹åˆ°æŽ¥æ”¶æ–¹è¿‡ç¨‹ä¸­, ç¡®å®šä¸€æ¡é€šè¿‡è·¯ç”±å™¨ç½‘ç»œçš„è¾ƒå¥½çš„è·¯å¾„;
>     - ç­‰ä»·äºŽè·¯ç”±;
>     - å¥½çš„è·¯å¾„: å…·æœ‰æœ€ä½Žå¼€é”€çš„è·¯å¾„;
>     - é€šå¸¸è¿˜éœ€è¦åŒ…æ‹¬ä¸€äº›è§„åˆ™/ç­–ç•¥, ä¾‹å¦‚: æŸè·¯ç”±å™¨ä¸åº”è½¬å‘æŸäº›ç‰¹å®šçš„åˆ†ç»„;
>
> ---
>
> ###### ç›¸å…³æ¦‚å¿µ
>
> - æœ€ä½Žå¼€é”€è·¯å¾„ (least-cost path) / æœ€çŸ­è·¯å¾„ (shortest path)
>     - æœ€ä½Žå¼€é”€è·¯å¾„æ˜¯æŒ‡è·¯å¾„å¼€é”€çš„å’Œæœ€ä½Žçš„è·¯å¾„;
>     - æœ€çŸ­è·¯å¾„æ˜¯æŒ‡ç»è¿‡ç‰©ç†é“¾è·¯æ•°é‡æœ€å°‘çš„è·¯å¾„;
>
> ---
>
> ###### åŽŸåˆ™
>
> - æ­£ç¡®æ€§ (correctness):
>     - ç®—æ³•å¿…é¡»æ˜¯æ­£ç¡®çš„å’Œå®Œæ•´çš„, ä½¿åˆ†ç»„ä¸€ç«™ä¸€ç«™æŽ¥åŠ›, æ­£ç¡®å‘å‘ç›®æ ‡ç«™;
>     - å®Œæ•´: æ‰€æœ‰çš„ç›®æ ‡åœ°å€, åœ¨è·¯ç”±è¡¨ä¸­éƒ½èƒ½æ‰¾åˆ°ç›¸åº”çš„è¡¨é¡¹, å³æ²¡æœ‰å¤„ç†ä¸äº†çš„ç›®æ ‡åœ°å€;
> - ç®€å•æ€§ (simplicity):
>     - ç®—æ³•åœ¨è®¡ç®—æœºä¸Šåº”ç®€å•: æœ€ä¼˜ä½†å¤æ‚çš„ç®—æ³•, æ—¶é—´ä¸Šå»¶è¿Ÿå¾ˆå¤§, ä¸å®žç”¨, ä¸åº”ä¸ºäº†èŽ·å–è·¯ç”±ä¿¡æ¯å¢žåŠ å¾ˆå¤šçš„é€šä¿¡é‡;
> - å¥å£®æ€§ (robustness):
>     - ç®—æ³•åº”èƒ½é€‚åº”é€šä¿¡é‡å’Œç½‘ç»œæ‹“æ‰‘çš„å˜åŒ–: é€šä¿¡é‡å˜åŒ–, ç½‘ç»œæ‹“æ‰‘çš„å˜åŒ–ç­‰, ç®—æ³•èƒ½å¾ˆå¿«é€‚åº”;
>     - ä¸å‘å¾ˆæ‹¥æŒ¤çš„é“¾è·¯å‘æ•°æ®, ä¸å‘æ–­äº†çš„é“¾è·¯å‘é€æ•°æ®;
> - ç¨³å®šæ€§ (stability): äº§ç”Ÿçš„è·¯ç”±ä¸åº”è¯¥æ‘‡æ‘†;
> - å…¬å¹³æ€§ (fairness): å¯¹æ¯ä¸€ä¸ªç«™ç‚¹éƒ½å…¬å¹³;
> - æœ€ä¼˜æ€§ (optimality): æŸä¸€ä¸ªæŒ‡æ ‡çš„æœ€ä¼˜: æ—¶é—´, è´¹ç”¨ç­‰æŒ‡æ ‡, æˆ–ç»¼åˆæŒ‡æ ‡;
>     - å®žé™…ä¸Š, èŽ·å–æœ€ä¼˜çš„ç»“æžœä»£ä»·è¾ƒé«˜, å¯ä»¥æ˜¯æ¬¡ä¼˜çš„;
>
> ---
>
> ###### åˆ†ç±»
>
> - æ ¹æ®ç®—æ³•æ˜¯é›†ä¸­å¼è¿˜æ˜¯åˆ†æ•£å¼åˆ†ç±»
>
>     - é›†ä¸­å¼ (centralized)
>         - åœ¨æŸä¸ªä½ç½®, **ä½¿ç”¨å®Œæ•´çš„, å…¨å±€æ€§çš„ç½‘ç»œçŸ¥è¯†**è®¡ç®—æºåˆ°ç›®çš„åœ°ä¹‹é—´çš„æœ€ä½Žå¼€é”€è·¯å¾„;
>             - è¿™ä¸ªä½ç½®å¯ä»¥æ˜¯é€»è¾‘é›†ä¸­å¼æŽ§åˆ¶å™¨, ä¹Ÿå¯ä»¥æ˜¯åœ¨æ¯ä¸ªè·¯ç”±å™¨çš„æŽ§åˆ¶ç»„ä»¶ä¸­é‡å¤è¿›è¡Œ;
>         - è¿™ç§å…·æœ‰å…¨å±€çŠ¶æ€ä¿¡æ¯çš„ç®—æ³•è¢«ç§°ä¸ºé“¾è·¯çŠ¶æ€ (Link State, LS) ç®—æ³•;
>
>     - åˆ†æ•£å¼ (decentralized)
>         - è·¯ç”±å™¨ä»¥**è¿­ä»£**, **åˆ†å¸ƒå¼**çš„æ–¹å¼, è®¡ç®—å‡ºæœ€ä½Žå¼€é”€è·¯å¾„;
>             - æ¯ä¸ªèŠ‚ç‚¹åªå…·æœ‰ä¸Žå…¶ç›´æŽ¥ç›¸è¿žçš„é“¾è·¯çš„å¼€é”€çš„çŸ¥è¯†;
>         - è¿™ç§ç®—æ³•æ›´åŠ é€‚åˆè·¯ç”±å™¨ä¹‹é—´ç›´æŽ¥äº¤äº’çš„æŽ§åˆ¶å¹³é¢;
>         - è¿™ç§ç®—æ³•å«åšè·ç¦»å‘é‡ (distance vector) ç®—æ³•;
>
> - æ ¹æ®ç®—æ³•æ˜¯é™æ€è¿˜æ˜¯åŠ¨æ€åˆ†ç±»
>
>     - é™æ€ (static)
>         - è·¯ç”±éšç€æ—¶é—´çš„å˜åŒ–ç¼“æ…¢, é€šå¸¸æ˜¯äººå·¥é…ç½®;
>         - æ˜¯éžè‡ªé€‚åº”æ€§ (non-adaptive algorithm) ç®—æ³•;
>     - åŠ¨æ€ (dynamic)
>         - éšç€ç½‘ç»œæµé‡è´Ÿè½½æˆ–ç½‘ç»œæ‹“æ‰‘çš„å˜åŒ–è€Œæ”¹å˜è·¯ç”±é€‰æ‹©è·¯å¾„;
>         - å‘¨æœŸæ€§è¿è¡Œ, æˆ–å“åº”ç½‘ç»œæ‹“æ‰‘/æµé‡è´Ÿè½½å˜åŒ–è€Œè¿è¡Œ;
>         - æ˜¯è‡ªé€‚åº” (adaptive algorithm) ç®—æ³•;
>
> - æ ¹æ®ç®—æ³•çš„è´Ÿè½½æ•æ„Ÿæ€§åˆ†ç±»
>
>     - è´Ÿè½½æ•æ„Ÿçš„ (load-sensitive)
>         - é“¾è·¯å¼€é”€åŠ¨æ€å˜åŒ–, ä»¥ååº”åº•å±‚é“¾è·¯çš„æ‹¥å¡žæ°´å¹³;
>         - è‹¥ä¸€æ¡é“¾è·¯å¼€é”€è¾ƒå¤§, åˆ™ç®—æ³•è¶‹å‘äºŽç»•å¼€è¯¥é“¾è·¯;
>     - è´Ÿè½½è¿Ÿé’çš„ (load-insensitive)
>         - å½“ä»Šçš„è·¯ç”±é€‰æ‹©ç®—æ³•éƒ½æ˜¯è´Ÿè½½è¿Ÿé’çš„, å› ä¸ºå¼€é”€å¹¶ä¸æ˜Žç¡®ååº”å½“å‰çš„æ‹¥å¡žæ°´å¹³;

### é“¾è·¯çŠ¶æ€ (Link-State, LS) è·¯ç”±é€‰æ‹©ç®—æ³•

> ###### æ€»æ­¥éª¤
>
> 1. èŽ·å¾—ç½‘ç»œæ‹“æ‰‘å’Œé“¾è·¯ä»£ä»·ä¿¡æ¯;
>     - é€šè¿‡é“¾è·¯çŠ¶æ€å¹¿æ’­ (link state broadcast) å®Œæˆ, å®ƒå¯ä»¥è®©ç½‘ç»œä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½å…·æœ‰è¯¥ç½‘ç»œçš„ç»Ÿä¸€çš„, å®Œæ•´çš„è§†å›¾;
> 2. ä½¿ç”¨æœ€çŸ­è·¯ç”±ç®—æ³•, å¾—åˆ°è·¯ç”±è¡¨;
>     - ä¾‹å¦‚: Dijkstra ç®—æ³•, Prim ç®—æ³•......
>
> ---
>
> ###### ç®—æ³•å¤æ‚åº¦
>
> - é“¾è·¯çŠ¶æ€å¹¿æ’­
>     - æ¯ä¸ªè·¯ç”±å™¨éœ€è¦å°† LS åˆ†ç»„å¹¿æ’­ç»™å…¶ä»–æ‰€æœ‰è·¯ç”±å™¨;
>     - æ¯ä¸ª LS åˆ†ç»„å°†ç©¿è¿‡ $O(n)$ ä¸ªé“¾è·¯, åˆ™å…¨å±€çš„ message complexity = $O(n^2)$ ;
> - Dijkstra ç®—æ³•
>     - æœ€å·®æƒ…å†µä¸‹, éœ€è¦ $\frac{n(n+1)}{2}$ æ¬¡æ¯”è¾ƒ, å³: $O(n^2)$ ;

#### é“¾è·¯çŠ¶æ€å¹¿æ’­

> ###### ç›®çš„
>
> - è®©ç½‘ç»œä¸­æ‰€æœ‰è·¯ç”±å™¨èŽ·å¾—ç½‘ç»œæ‹“æ‰‘å’Œé“¾è·¯çš„ä»£ä»·ä¿¡æ¯;
>
> ---
>
> ###### æ­¥éª¤
>
> 1. å‘çŽ°ç›¸é‚»èŠ‚ç‚¹, å¹¶èŽ·çŸ¥å¯¹æ–¹çš„ç½‘ç»œåœ°å€;
> 2. æµ‹é‡ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´çš„ä»£ä»·;
> 3. ç»„è£… LS åˆ†ç»„, ç”¨äºŽæè¿°ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´çš„ä»£ä»·ä¿¡æ¯;
> 4. å°† LS åˆ†ç»„é€šè¿‡æ‰©æ•£ (æ³›æ´ª) çš„æ–¹å¼å‘é€åˆ°å…¶ä»–çš„æ‰€æœ‰è·¯ç”±å™¨;
>
> ----
>
> ###### LS åˆ†ç»„ (é“¾è·¯çŠ¶æ€åˆ†ç»„)
>
> <left><img src="assets/image-20220526153142914.png" alt="image-20220526153142914" style="zoom:50%;" /></left>
>
> - åŒ…æ‹¬ä»Žäº§ç”Ÿè¯¥ LS åˆ†ç»„çš„è·¯ç”±å™¨åˆ°å…¶é‚»å±…è·¯ç”±å™¨çš„ä»£ä»·ä¿¡æ¯;
> - Seq å­—æ®µå’Œ Age å­—æ®µ: è§£å†³æ³›æ´ªå¯èƒ½å¯¼è‡´çš„å¹¿æ’­é£Žæš´é—®é¢˜;
>     - å¹¿æ’­é£Žæš´: ä¾‹å¦‚é‡åˆ°äº†çŽ¯è·¯å¯¼è‡´åˆ†ç»„æ— é™åœ¨çŽ¯ä¸­ä¼ æ’­;
>     - Seq : ç‰ˆæœ¬å·, æ¯ä¸ªè·¯ç”±å™¨å¯ä»¥è®°å½•æ˜¯å¦å‘é€è¿‡è¯¥åˆ†ç»„;
>     - Age :  ç±»ä¼¼äºŽ TTL ;

#### Dijkstra ç®—æ³•

> ###### ç‰¹ç‚¹
>
> - é›†ä¸­å¼çš„: æ•´ä¸ªç½‘ç»œæ‹“æ‰‘, ç½‘ç»œä¸­æ‰€æœ‰é“¾è·¯çš„ä»£ä»·ä½œä¸ºå·²çŸ¥çš„ç®—æ³•è¾“å…¥;
> - å¯ä»¥è®¡ç®—å¾—åˆ°ä»Žä¸€ä¸ªæºåˆ°è¾¾æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„;
> - å½“è¿›è¡Œ $k$ æ¬¡è¿­ä»£åŽ, å¯ä»¥å¾—åˆ°ä»Žæºåˆ° $k$ ä¸ªç›®çš„èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„;
>
> ---
>
> ###### æœ¯è¯­è§„å®š
>
> - $C_{x,y}$ : <u>direct</u> link cost from node $x$ to $y$ ;
>     - $C_{x,y}=\infty$ if $x$ and $y$ are not direct neighbors;
> - $D(v)$ : <u>current estimate</u> of cost of least-cost-path from source to destination $v$ ;
> - $p(v)$ : predecessor node along path from source to $v$ ;
> - $N^\prime$ : set of nodes whose leastcost-path <u>definitively known</u> ;
>
> ---
>
> ###### ä¼ªä»£ç 
>
> <left><img src="assets/image-20220526153624284.png" alt="image-20220526153624284" style="zoom:50%;" />
>
> 1. åˆå§‹åŒ–
>
>     1. æœ€ä½Žå¼€é”€è·¯å¾„å·²çŸ¥çš„èŠ‚ç‚¹é›†åˆ $N^\prime$ , åˆå§‹åŒ–ä¸ºæº $u$ ;
>     2. å¯¹äºŽæ‰€æœ‰å…¶ä»–èŠ‚ç‚¹ $v$ :
>         - å¦‚æžœ $v$ æ˜¯ $u$ çš„é‚»å±…: åˆå§‹åŒ– $D(v)=c(u,v)$ , $p(v) = u$;
>         - å¦åˆ™: åˆå§‹åŒ– $D(v)=\infty$ , $p(v)$ å¾…å®š;
>
> 2. å¾ªçŽ¯, ç›´åˆ°æ‰€æœ‰æœ€çŸ­è·¯å¾„éƒ½è¢«ç¡®å®š ( $N^\prime==N$ )
>
>     1. å¯¹äºŽæ‰€æœ‰ä¸åœ¨ $N^\prime$ ä¸­çš„èŠ‚ç‚¹ $w$ : å– $D(w)$ æœ€å°çš„ä¸€ä¸ª $w^\prime$ , å°†è¯¥ $w^\prime$ åŠ å…¥ $N^\prime$ ;
>
>     2. å¯¹äºŽ $w^\prime$ çš„æ‰€æœ‰é‚»å±… $v$ , ä½¿ç”¨ä¸‹è¿°å…¬å¼æ›´æ–° $D(v)$ , å¦‚æžœéœ€è¦åˆ™åŒæ—¶æ›´æ–° $p(v)$
>         $$
>         \large D(v)=min\{~D(v)~,~~D(w^\prime)+c(w^\prime,v)~\}
>         $$
>
> 3. å½“ $N^\prime==N$ æ—¶, ä»Žæº $u$ åˆ°å…¶ä½™æ‰€æœ‰èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„åŠå…¶å¼€é”€å°±å·²ç»ç¡®å®š, è·¯å¾„å¯ç”± $p(v)$ å‘å‰æŽ¨å¯¼å¾—åˆ°;
>
> ---
>
> ###### éœ‡è¡é—®é¢˜
>
> - å½“é“¾è·¯çš„ä»£ä»·ä¸Žå…¶æ‰¿è½½çš„æµé‡å¯†åˆ‡ç›¸å…³æ—¶, å¯èƒ½å‡ºçŽ°éœ‡è¡é—®é¢˜;
> - ä¸¾ä¾‹è¯´æ˜Ž
>     - å‡è®¾æœ‰ä¸¤ä¸ªæ–¹å‘å¯ä»¥å‘é€åˆ†ç»„: æ–¹å‘ A / B
>     - ç¬¬ä¸€æ¬¡è¿è¡Œ LS ç®—æ³•, åœ¨ LS ç®—æ³•çš„ "æŒ‡å¯¼" ä¸‹, å¤§é‡çš„åˆ†ç»„æ²¿ç€ A æ–¹å‘å‘é€, å¯¼è‡´ A æ–¹å‘ä¸å†æ˜¯ä¸€ä¸ªæœ€ä¼˜è·¯å¾„, ä»£ä»·å˜é«˜;
>     - ç¬¬äºŒæ¬¡è¿è¡Œ LS ç®—æ³•, åœ¨ LS ç®—æ³•çš„ "æŒ‡å¯¼" ä¸‹, å¤§é‡çš„åˆ†ç»„æ²¿ç€ B æ–¹å‘å‘é€, å¯¼è‡´ B æ–¹å‘ä¸å†æ˜¯ä¸€ä¸ªæœ€ä¼˜è·¯å¾„, ä»£ä»·å˜é«˜;
>     - ç¬¬ä¸‰æ¬¡è¿è¡Œ LS ç®—æ³•, åœ¨ LS ç®—æ³•çš„ "æŒ‡å¯¼" ä¸‹, å¤§é‡çš„åˆ†ç»„æ²¿ç€ A æ–¹å‘å‘é€, å¯¼è‡´ A æ–¹å‘ä¸å†æ˜¯ä¸€ä¸ªæœ€ä¼˜è·¯å¾„, ä»£ä»·å˜é«˜;
>     - ......
>     - å¦‚æ­¤ä¸æ–­åå¤, é€ æˆ "éœ‡è¡" é—®é¢˜;
> - è§£å†³æ–¹æ³•
>     - ä¸å®žé™…çš„æ–¹æ³• 1: å¼ºåˆ¶ä½¿å¾—é“¾è·¯å¼€é”€ä¸å†ä¾èµ–äºŽé“¾è·¯æ‰€æ‰¿è½½çš„æµé‡;
>     - å¯è¡Œçš„æ–¹æ³• 2: ç¡®ä¿å¹¶éžæ‰€æœ‰çš„è·¯ç”±å™¨éƒ½åŒæ—¶è¿è¡Œ LS ç®—æ³•;

---

### è·ç¦»å‘é‡ (Distance-Vector, DV) è·¯ç”±é€‰æ‹©ç®—æ³•

> ###### ç‰¹ç‚¹
>
> - è¿­ä»£çš„: è¿™ä¸ªè¿‡ç¨‹éœ€è¦æŒç»­åˆ°é‚»å±…ä¹‹é—´æ²¡æœ‰æ›´å¤šä¿¡æ¯éœ€è¦äº¤æ¢ä¸ºæ­¢;
> - è‡ªæˆ‘ç»ˆæ­¢çš„: æ²¡æœ‰ä¸€ä¸ªæ˜¾å¼çš„è®¡ç®—åœæ­¢ä¿¡å·;
> - å¼‚æ­¥çš„: ä¸è¦æ±‚æ¯ä¸ªèŠ‚ç‚¹ç›¸äº’ä¹‹é—´æ­¥ä¼ä¸€è‡´
> - åˆ†å¸ƒå¼çš„
>     - æ¯ä¸ªé˜¶æ®µåªç»´æŠ¤ä¸€å¼ å±€éƒ¨çš„è·¯ç”±è¡¨;
>     - æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦ä»Žä¸€ä¸ªæˆ–å¤šä¸ª**ç›´æŽ¥ç›¸è¿žçš„é‚»å±…**æŽ¥æ”¶ä¸€äº›ä¿¡æ¯, æ‰§è¡Œè®¡ç®—, ç„¶åŽå°†è®¡ç®—ç»“æžœåˆ†å‘ç»™é‚»å±…;
>
> ---
>
> ###### Bellman-Ford æ–¹ç¨‹
>
> $$
> \large d_{x}(y)=\min _{v}\left\{c(x, v)+d_{v}(y)\right\}
> $$
>
> - æ˜¯è¿­ä»£çš„, å³å¦‚æžœè¦æ±‚å‡ºæœ€å°çš„ $d_x(y)$ , å°±è¦å…ˆæ±‚å‡ºæ‰€æœ‰çš„ $d_v(y)$ , å…¶ä¸­ $v$ æ˜¯ $x$ çš„é‚»å±…èŠ‚ç‚¹;
>
> ---
>
> ###### æ¯ä¸ªèŠ‚ç‚¹æ‰€ç»´æŠ¤çš„ä¿¡æ¯
>
> - è¯¥èŠ‚ç‚¹ ($x$) åˆ°å…¶é‚»å±…çš„é“¾è·¯çš„å¼€é”€ $c(x,v)$
> - è‡ªèº«çš„è·ç¦»å‘é‡ $\vec{\boldsymbol{D}}_x=[D_x(y):y\in N]$
>     - å…¶ä¸­ $D_x(y)$ ä¸ºä»Ž $x$ åˆ° $y$ çš„å¼€é”€çš„ä¼°è®¡å€¼;
> - è¯¥èŠ‚ç‚¹çš„æ¯ä¸ªé‚»å±…çš„è·ç¦»å‘é‡ $\vec{\boldsymbol{D}}_v=[D_v(y):y\in N]$
>
> ---
>
> ###### ä¼ªä»£ç 
>
> <left><img src="assets/image-20220526113937666.png" alt="image-20220526113937666" style="zoom:50%;" /></left>
>
> 1. åˆå§‹åŒ–
>
>     1. å¯¹äºŽè‡ªèº« ($x$) çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ $w$ , å°†è·ç¦»å‘é‡ä¸­çš„å¯¹åº”å€¼ç½®ä¸ºä¸¤è€…ä¹‹é—´é“¾è·¯çš„å¼€é”€ $c(x,w)$ , éžé‚»å±…èŠ‚ç‚¹åˆ™åˆå§‹åŒ–å¼€é”€ä¸º $\infty$ ;
>     2. å¯¹äºŽè‡ªèº« ($x$) çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ $w$ , $\vec{\boldsymbol{D}}_w$ æš‚æ—¶æœªçŸ¥;
>     3. å‘è‡ªèº« ($x$) çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ $w$ å‘é€è‡ªå·±çš„è·ç¦»å‘é‡ $\vec{\boldsymbol{D}}_x$ ;
>
> 2. ä¸æ–­å¾ªçŽ¯
>
>     1. ç­‰å¾…, ç›´åˆ°ä¸‹åˆ—æ¡ä»¶ä¹‹ä¸€æˆç«‹æ—¶é€€å‡ºç­‰å¾…, æ‰§è¡Œä¸‹ä¸€æ­¥:
>
>         - è‡ªèº«å‘¨å›´çš„é“¾è·¯å¼€é”€æ”¹å˜;
>         - è‡ªå·±æ”¶åˆ°ä¸€ä¸ªæ¥è‡ªé‚»å±…èŠ‚ç‚¹çš„è·ç¦»å‘é‡;
>
>     2. éåŽ†ç½‘ç»œä¸­çš„æ¯ä¸ªèŠ‚ç‚¹, æŒ‰ç…§ Bellman-Ford æ–¹ç¨‹çš„å½¢å¼æ›´æ–°è‡ªèº«çš„è·ç¦»å‘é‡ $\vec{\boldsymbol{D}}_x$ ;
>         $$
>         \large D_{x}(y)=\min _{v}\left\{c(x, v)+D_{v}(y)\right\}
>         $$
>
>     3. å¦‚æžœåœ¨ `æ­¥éª¤ 2.2` ä¸­æ”¹å˜äº†è·ç¦»å‘é‡ $\vec{\boldsymbol{D}}_x$ , åˆ™å°†å…¶å‘é€ç»™è‡ªå·±çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹;
>
> ---
>
> ###### ç®—æ³•è¯´æ˜Ž
>
> - åªè¦æ‰€æœ‰èŠ‚ç‚¹ä»¥å¼‚æ­¥çš„æ–¹å¼ä¸æ–­æ›´æ–°è·ç¦»å‘é‡, åˆ™å¼€é”€çš„ä¼°è®¡å€¼ $D_x(y)$ å°†æ”¶æ•›äºŽçœŸå®žçš„æœ€ä½Žå¼€é”€ $d_x(y)$ ;
> - å¦‚æžœæ²¡æœ‰é“¾è·¯çš„æ›´æ–°, å°†é€æ¸ä¸ä¼šå†æœ‰æ›´æ–°æŠ¥æ–‡è¢«å‘é€, æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½åœç•™åœ¨ `æ­¥éª¤ 2.1` çš„å¾ªçŽ¯ç­‰å¾…ä¸­;
>
> ---
>
> ###### å­˜åœ¨çš„é—®é¢˜
>
> - è·¯ç”±é€‰æ‹©çŽ¯è·¯ (routing loop) ä¸Žæ— ç©·è®¡æ•°
>
>     - å½“é“¾è·¯å¼€é”€å˜åæ—¶, y ä¸ºäº†ä»¥æœ€å°å¼€é”€åˆ°è¾¾ x , ä»Žè€Œé€‰æ‹©å°†åˆ†ç»„è·¯ç”±è‡³ z , è€Œ z å°šæœªå¾—çŸ¥è¿™ä¸€é“¾è·¯çš„å˜åŒ–, å³æ²¡æœ‰æ›´æ–°è·¯ç”±è¡¨, å› æ­¤ z åˆå°†åˆ†ç»„è·¯ç”±å›ž y ä»¥èŽ·å¾—æœ€å°å¼€é”€, è¿›è€Œå½¢æˆä¸€ä¸ªçŽ¯, åˆ†ç»„åœ¨ y ä¸Ž z ä¹‹é—´ä¸åœæ¥å›žå¾€å¤, è¿™ä¸€åæ¶ˆæ¯éœ€è¦å¾ˆå¤šæ¬¡è¿­ä»£æ‰èƒ½å®Œæˆä¼ é€’;
>
>     - æ— ç©·è®¡æ•°: å¦‚æžœé—®é¢˜æ›´åŠ ä¸¥é‡, æ¯”å¦‚æŸäº›é“¾è·¯æ–­å¼€, åˆ™å¯èƒ½éœ€è¦æ— ç©·çš„è¿­ä»£æ¬¡æ•° DV ç®—æ³•æ‰èƒ½æ”¶æ•›, å³æ— ç©·æ¬¡è¿­ä»£åŽ, ä¸€äº›èŠ‚ç‚¹æ‰å‘çŽ°æŸå¤„ä¸å¯è¾¾;
>         <left><img src="assets/image-20220526165655520.png" alt="image-20220526165655520" style="zoom:40%;" /></left>
>
> - å¥½æ¶ˆæ¯ä¼ é€’å¾ˆå¿«, åæ¶ˆæ¯ä¼ é€’å¾ˆæ…¢;
>
>     - å¥½æ¶ˆæ¯: å¦‚æŸä¸ªè·¯ç”±å™¨çš„æŽ¥å…¥, æˆ–æ˜¯æŸæ¡é“¾è·¯ä»£ä»·çš„å‡å°‘;
>     - åæ¶ˆæ¯: æŸä¸ªé“¾è·¯çš„æ–­å¼€, æˆ–æ˜¯æŸæ¡é“¾è·¯ä»£ä»·çš„å¢žåŠ ;
>
> - è¯¦è§è¯¾æœ¬ P252 çš„è®¨è®º;
>
> ---
>
> ###### è·¯ç”±é€‰æ‹©çŽ¯è·¯é—®é¢˜çš„éƒ¨åˆ†è§£å†³: æ¯’æ€§é€†è½¬ (poisoned reverse)
>
> - "å–„æ„çš„è°Žè¨€" : å¦‚æžœ z é€šè¿‡ y ä»¥è·¯ç”±åˆ†ç»„è‡³ç›®çš„åœ° x , åˆ™ z å°†è¿™æ ·å‘ y è¯´è°Ž: è°Žç§°è‡ªå·±åˆ°ç›®çš„åœ° x çš„å¼€é”€ $D_z(x)=\infty$ ;
> - å±€é™æ€§: è¯¥æ–¹æ³•åªèƒ½è§£å†³ä¸¤ä¸ªé‚»å±…èŠ‚ç‚¹ä¹‹é—´çš„è·¯ç”±é€‰æ‹©çŽ¯è·¯é—®é¢˜, å½“æ¶‰åŠ 3 ä¸ªæˆ–æ›´å¤šèŠ‚ç‚¹, è€Œä¸æ˜¯ä»…ä»…ä¸€å¯¹é‚»å±…èŠ‚ç‚¹çš„çŽ¯è·¯æ—¶, è¯¥æ–¹æ³•å°†å¤±æ•ˆ;

---

### LS ä¸Ž DV ç®—æ³•æ¯”è¾ƒ

> ###### æŠ¥æ–‡å¤æ‚åº¦
>
> - LS ç®—æ³•
>     - éœ€è¦å…¨å±€çš„ä¿¡æ¯;
>     - éœ€è¦å‘é€ $O(|N| \cdot |E|)$ ä¸ªæŠ¥æ–‡æ¥å¹¿æ’­ç½‘ç»œä¿¡æ¯;
>     - å½“ä¸€æ¡é“¾è·¯å‘ç”Ÿå˜åŒ–æ—¶, éœ€è¦å‘æ‰€æœ‰èŠ‚ç‚¹å‘é€è¯¥å˜åŒ–;
> - DV ç®—æ³• (ðŸ‘ðŸ»)
>     - æ¯æ¬¡è¿­ä»£æ—¶, è·ç¦»å‘é‡åªåœ¨ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´ä¼ æ’­;
>     - å½“ä¸€æ¡é“¾è·¯å¼€é”€æ”¹å˜æ—¶, åªæœ‰è¿™ä¸€æ”¹å˜å¯¼è‡´äº†æŸäº›æœ€çŸ­è·¯å¾„çš„æ”¹å˜ (è·ç¦»å‘é‡çš„æ”¹å˜), æ‰å‘å‘¨å›´ä¼ æ’­æ–°çš„è·ç¦»å‘é‡;
>
> ---
>
> ###### æ”¶æ•›é€Ÿåº¦
>
> - LS ç®—æ³• (ðŸ‘ðŸ») : è¦æ±‚ $O(|N| \cdot |E|)$ ä¸ªæŠ¥æ–‡çš„ $O(|N|^2)$ ç®—æ³•, ä½†æœ‰å¯èƒ½éœ‡è¡;
> - DV ç®—æ³•: æ”¶æ•›è¾ƒæ…¢, å¯èƒ½é‡åˆ°è·¯ç”±é€‰æ‹©çŽ¯è·¯, ç”šè‡³é‡åˆ°æ— ç©·è®¡æ•°é—®é¢˜;
>
> ---
>
> ###### å¥å£®æ€§
>
> - å‡è®¾: ä¸€å°è·¯ç”±å™¨å‘ç”Ÿæ•…éšœ / è¡Œä¸ºé”™ä¹± / å—åˆ°è“„æ„ç ´å;
> - LS ç®—æ³• (ðŸ‘ðŸ»)
>     - ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å°†é”™è¯¯çš„ LS åˆ†ç»„å‘æ•´ä¸ªç½‘ç»œå¹¿æ’­, ä½†æ˜¯å…¶ä»–èŠ‚ç‚¹å¯ä»¥ä¸¢å¼ƒæ”¶åˆ°çš„ LS åˆ†ç»„;
>     - æ¯ä¸ªè·¯ç”±å™¨è‡ªå·±è®¡ç®—è‡ªå·±çš„è½¬å‘è¡¨, å³è®¡ç®—æ˜¯åˆ†ç¦»çš„, é”™è¯¯åªå½±å“å±€éƒ¨, æä¾›äº†ä¸€å®šç¨‹åº¦ä¸Šçš„å¥å£®æ€§;
> - DV ç®—æ³•: DV ç®—æ³•æ¯æ¬¡è¿­ä»£è®¡ç®—å¾—åˆ°çš„ç»“æžœä¼šé€æ¸ä¼ é€’ç»™è¶Šæ¥è¶Šè¿œçš„è·¯ç”±å™¨, è¿›è€Œæ‰©æ•£åˆ°æ•´ä¸ªç½‘ç»œ;

---

## Â§ 5.3 AS å†…éƒ¨çš„è·¯ç”±é€‰æ‹©: OSPF

> ###### LS / DV ç®—æ³•æ— æ³•ç›´æŽ¥åº”ç”¨
>
> - è§„æ¨¡: è·¯ç”±å™¨æ•°ç›®è¶Šæ¥è¶Šå¤§;
>     - LS æ‰€éœ€çš„æ•´ä¸ªç½‘ç»œæ‹“æ‰‘å’Œæ‰€æœ‰é“¾è·¯ä»£ä»·å°†å æ®æžå¤§åœ°å­˜å‚¨ / ä¼ è¾“èµ„æº;
>     - DV çš„è¿­ä»£å°†æ°¸è¿œæ— æ³•æ”¶æ•›;
> - ç®¡ç†è‡ªæ²»: ç»„ç»‡åº”å½“èƒ½å¤ŸæŒ‰ç…§è‡ªå·±å¸Œæœ›çš„æ–¹å¼è¿è¡Œè·¯ç”±å™¨, ç®¡ç†å†…éƒ¨ç½‘ç»œ, å¯¹å¤–éšè—å†…éƒ¨ç½‘ç»œä¿¡æ¯, ä¸”å°†å†…éƒ¨ç½‘ç»œä¸Žå¤–éƒ¨äº’è”;
>
> ---
>
> ###### ç›¸å…³æ¦‚å¿µ
>
> - è‡ªæ²»ç³»ç»Ÿ (Autonomous System, AS)
>     - æ¯ä¸ª AS ç”±ä¸€ç»„é€šå¸¸å¤„åœ¨ç›¸åŒç®¡ç†æŽ§åˆ¶ä¸‹çš„è·¯ç”±å™¨ç»„æˆ;
>     - é€šå¸¸åœ¨ä¸€ä¸ª ISP ä¸­çš„è·¯ç”±å™¨, ä»¥åŠäº’è”è¿™äº›è·¯ç”±å™¨çš„é“¾è·¯æž„æˆä¸€ä¸ª AS ;
>     - ä¸€ä¸ª AS ç”±ä¸€ä¸ª AS å· (ASN) æ ‡è¯†, å®ƒç”± ICANN åˆ†é…;
>     - æ–¹ä¾¿ç®¡ç†
>         - ä¸åŒçš„ AS å¯ä»¥è¿è¡Œä¸åŒçš„ç½‘ç»œåè®®;
>         - AS å†…éƒ¨çš„ç½‘ç»œç»†èŠ‚ä¸å¯¹å¤–é€éœ²;
>     - æ˜“äºŽæ‰©å±•
>         - å¢žåŠ ä¸€ä¸ª AS å¯¹äºŽå…¶ä»– AS æ¥è¯´åªæ˜¯å¢žåŠ äº†ä¸€ä¸ªè¡¨é¡¹;
>         - è§„æ¨¡è¿‡å¤§çš„ AS å¯ä»¥åˆ†è§£ä¸ºå¤šä¸ªå°çš„ AS ;
>         - æ€»ä½“è§„æ¨¡çš„å¢žå¤§ä¸ä¼šå¯¹æ€§èƒ½å½±å“å¾ˆå¤§;
> - è‡ªæ²»ç³»ç»Ÿå†…éƒ¨è·¯ç”±é€‰æ‹©åè®® (intra-autonomous system routing protocol)
>     - åœ¨ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†…éƒ¨è¿è¡Œçš„è·¯ç”±é€‰æ‹©ç®—æ³•;
>     - ç›¸åŒ AS ä¸­çš„è·¯ç”±å™¨éƒ½è¿è¡Œç›¸åŒçš„è·¯ç”±é€‰æ‹©ç®—æ³•, å¹¶ä¸”æ‹¥æœ‰è·¯ç”±å™¨å½¼æ­¤çš„ä¿¡æ¯;

### å¼€æ”¾æœ€çŸ­è·¯ä¼˜å…ˆ (OSPF, Open Shortest Path First) è·¯ç”±é€‰æ‹©

> ###### æ¦‚è¿°
>
> - æ˜¯ä¸€ç§ LS åè®®, è¢«ç”¨äºŽ AS å†…éƒ¨çš„è·¯ç”±é€‰æ‹©;
>     - æ¯ä¸ªèŠ‚ç‚¹ä¿å­˜åŒºåŸŸå†…éƒ¨çš„ç½‘ç»œæ‹“æ‰‘å’Œé“¾è·¯ä»£ä»·ä¿¡æ¯;
>     - åŸºäºŽæ´ªæ³›é“¾è·¯çŠ¶æ€ä¿¡æ¯ (æœ¬åœ°åŒºåŸŸå†…éƒ¨è¿›è¡Œ) å’Œ Dijkstra ç®—æ³• (æ¯ä¸ªè·¯ç”±å™¨ä¸­è¿è¡Œ) ;
> - ç½‘ç»œç®¡ç†å‘˜å¯ä»¥é…ç½®é“¾è·¯çš„æƒå€¼;
>     - å°†æ‰€æœ‰é“¾è·¯æƒå€¼ç½®ä¸º 1 , åˆ™ä¸ºæœ€å°è·³æ•°ä¼˜å…ˆ;
>     - å°†é“¾è·¯æƒå€¼è®¾ä¸ºå¸¦å®½çš„å€’æ•°, åˆ™é¼“åŠ±å¤šèµ°é«˜å¸¦å®½é“¾è·¯;
>     - å¯ä»¥æ ¹æ®æ‰€æœŸæœ›çš„è·¯ç”±è·¯å¾„, "åå‘æ“ä½œ": äººä¸ºè®¡ç®—å¹¶è®¾ç½®æƒå€¼, ä½¿å¾— OSPF èƒ½å¤Ÿå¾—å‡ºè¿™ä¸ªæ‰€æœŸæœ›çš„è·¯ç”±è·¯å¾„;
>     - ......
> - å½“é“¾è·¯çŠ¶æ€å‘ç”Ÿå˜åŒ–, è·¯ç”±å™¨ä¼šå‘ AS å†…çš„æ‰€æœ‰è·¯ç”±å™¨å¹¿æ’­è·¯ç”±é€‰æ‹©ä¿¡æ¯;
> - å³ä½¿é“¾è·¯çŠ¶æ€æ²¡æœ‰å˜åŒ–, ä¹Ÿä¼šå‘¨æœŸæ€§åœ°å¹¿æ’­ä¸€æ¬¡, è¿™æœ‰åˆ©äºŽæé«˜ç®—æ³•çš„å¥å£®æ€§;
> - OSPF æŠ¥æ–‡ç›´æŽ¥ç”± IP å±‚æ‰¿è½½, åè®®å· 89 , è€Œä¸æ˜¯ TCP/UDP ;
> -  éœ€è¦è‡ªå·±å®žçŽ°å¯é æŠ¥æ–‡ä¼ è¾“, é“¾è·¯çŠ¶æ€å¹¿æ’­ç­‰åŠŸèƒ½;
>
> ---
>
> ###### æ”¯æŒå•ä¸ª AS ä¸­çš„å±‚æ¬¡ç»“æž„
>
> <left><img src="assets/image-20220526203313020.png" alt="image-20220526203313020" style="zoom:50%;" /></left>
>
> - åŒºåŸŸ (area)
>     - åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨
>         - ä¸€å°æˆ–è€…å¤šå°;
>         - ä¸ºæµå‘åŒºåŸŸå¤–çš„åˆ†ç»„æä¾›è·¯ç”±é€‰æ‹©;
>         - å‘å…¶ä»–çš„åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨åœ¨éª¨å¹²åŒºåŸŸè¿›è¡Œé€šå‘Š, ä»Žè€Œä¸Žå…¶ä»–çš„åŒºåŸŸäº’è”;
>     - åŒºåŸŸå†…è·¯ç”±å™¨
>         - å³æ™®é€šçš„ AS å†…æœåŠ¡å™¨, LS æ³›æ´ª (é“¾è·¯çŠ¶æ€æŠ¥å‘Š) åªä¼šåœ¨æœ¬åŒºåŸŸå†…è¿›è¡Œ;
>         - åªå…·æœ‰è¯¥åŒºåŸŸ (æœ¬åœ°) çš„ç½‘ç»œæ‹“æ‰‘ä¿¡æ¯;
>         - å‘æœ¬åŒºåŸŸå¤–å‘é€çš„åˆ†ç»„éƒ½éœ€è¦ç»è¿‡åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨;
> - éª¨å¹²åŒºåŸŸ (backbone area)
>     - åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨
>         - åŒä¸Š;
>     - éª¨å¹² (ä¸»å¹²) è·¯ç”±å™¨
>         - åœ¨éª¨å¹²åŒºåŸŸå†…è¿è¡Œ OSPF çš„è·¯ç”±å™¨;
>     - è¾¹ç•Œè·¯ç”±å™¨
>         - ä½äºŽéª¨å¹²åŒºåŸŸçš„è¾¹ç•Œ, è´Ÿè´£è¿žæŽ¥å…¶ä»–æ›´å¤–å±‚çš„ AS ;
>
> ---
>
> ###### ä¼˜ç‚¹
>
> - å®‰å…¨
>     - å¯ä»¥ä½¿ç”¨ä¾‹å¦‚ MD5 ç­‰æŠ€æœ¯è¿›è¡Œè®¤è¯/é‰´åˆ«, é˜²æ­¢æ¶æ„ä¿¡æ¯è¢«æ³¨å…¥è·¯ç”±è¡¨;
> - å…è®¸åŒæ—¶ä½¿ç”¨å¤šæ¡ç›¸åŒå¼€é”€çš„è·¯å¾„
>     - è½¬å‘è¿‡ç¨‹ä¸­, å½“å¤šæ¡è·¯å¾„å…·æœ‰ç›¸åŒå¼€é”€æ—¶, OSPF å…è®¸åŒæ—¶ä½¿ç”¨è¿™äº›è·¯å¾„, è€Œä¸å¿…åªé€‰æ‹©ä¸€ä¸ªæ‰¿è½½æ‰€æœ‰æµé‡;
>     - RIP åªèƒ½é€‰æ‹©ä¸€ä¸ª;
> - å¯¹å•æ’­å’Œå¤šæ’­è·¯ç”±é€‰æ‹©çš„ç»¼åˆæ”¯æŒ: å¯¹çŽ°æœ‰ OSPF é“¾è·¯çŠ¶æ€å¹¿æ’­æœºåˆ¶å¢žåŠ äº†ä¸€ç§æ–°åž‹çš„é“¾è·¯çŠ¶æ€é€šå‘Š;
> - æ”¯æŒè®¾ç½®å¤šé‡ä»£ä»·çŸ©é˜µ:
>     - ä¸åŒçš„æœåŠ¡ç±»åž‹ (å®žæ—¶ / å°½åŠ›è€Œä¸º) ä½¿ç”¨ä¸åŒçš„ä»£ä»·;
>     - æ”¯æŒæŒ‰ç…§ä¸åŒçš„ä»£ä»·è®¡ç®—ä¸åŒçš„æœ€ä¼˜è·¯å¾„;
> - æ”¯æŒå•ä¸ª AS ä¸­çš„å±‚æ¬¡ç»“æž„ (è¯¦è§ä¸Šæ–¹è®¨è®º), å¤§åž‹ç½‘ç»œä¸­ä¹Ÿæ”¯æŒå±‚æ¬¡æ€§çš„ OSPF;

---

### RIP (Routing Information Protocol)

> - ç»å…¸çš„ DV ç®—æ³•, æ¯ 30 ç§’äº¤æ¢ä¸€æ¬¡è·ç¦»å‘é‡;
> - ç›®å‰å·²ç»è¾ƒå°‘ä½¿ç”¨äº†;

---

## Â§ 5.4 ISP (AS) ä¹‹é—´çš„è·¯ç”±é€‰æ‹©: BGP

> ###### æ¦‚è¿°
>
> - BGP (Border Gateway Protocol, è¾¹ç•Œç½‘å…³åè®®), æ˜¯ ISP (AS) é—´çš„è·¯ç”±é€‰æ‹©åè®®;
> - å› ç‰¹ç½‘ä¸­, æ‰€æœ‰çš„ AS éƒ½è¿è¡Œ BGP, ä»¥åè°ƒ AS é—´çš„è·¯ç”±;
> - BGP æ˜¯åˆ†å¸ƒå¼çš„å¼‚æ­¥çš„åè®®, ä¸Ž DV è·¯ç”±é€‰æ‹©åè®®ä¸€è„‰ç›¸æ‰¿;
> - ä¸¤ä¸ª BGP è·¯ç”±å™¨ (peers) é€šè¿‡åŠæ°¸ä¹…çš„ TCP è¿žæŽ¥ (179 ç«¯å£å·) äº¤æ¢è·¯ç”±é€‰æ‹©ä¿¡æ¯ (BGP æŠ¥æ–‡);

### BGP çš„ä½œç”¨

> ###### æ¦‚è¿°
>
> - ç›®çš„åœ°ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„åœ°å€, è€Œæ˜¯ CIDR åŒ–çš„ä¸€ä¸ªå‰ç¼€ (å¦‚: 138.16.68/22);
> - è·¯ç”±å™¨çš„è½¬å‘è¡¨å°†æœ‰è¿™æ ·çš„å½¢å¼: `(x, I)`
>     - `x` : CIDR åŒ–çš„å‰ç¼€;
>     - `I` : è·¯ç”±å™¨çš„æŽ¥å£å·;
>
> ---
>
> ###### ä½œç”¨
>
> - ä»Žé‚»å±… AS èŽ·å–å‰ç¼€çš„å¯è¾¾æ€§ä¿¡æ¯;
>     - BGP å…è®¸æ¯ä¸ªå­ç½‘å‘å› ç‰¹ç½‘çš„å…¶ä»–éƒ¨åˆ†è¿›è¡Œé€šå‘Š: è®©å› ç‰¹ç½‘ä¸­çš„æ‰€æœ‰ AS çŸ¥é“è¯¥å­ç½‘çš„å­˜åœ¨;
> - ç¡®å®šåˆ°è¾¾ä¸€ä¸ªå‰ç¼€çš„æœ€å¥½çš„è·¯ç”±;

---

### é€šå‘Š BGP è·¯ç”±ä¿¡æ¯

> ###### ç›¸å…³æ¦‚å¿µ
>
> <left><img src="assets/image-20220526212941292.png" alt="image-20220526212941292" style="zoom:50%;" /></left>
>
> - ç½‘å…³è·¯ç”±å™¨ (gateway router): ä½äºŽ AS è¾¹ç¼˜çš„è·¯ç”±å™¨, ç›´æŽ¥ä¸Žå…¶ä»– AS çš„ä¸€å°æˆ–å¤šå°è·¯ç”±å™¨;
> - å†…éƒ¨è·¯ç”±å™¨ (internal router): ä½äºŽ AS å†…éƒ¨çš„è·¯ç”±å™¨, åªè¿žæŽ¥è‡ªå·± AS ä¸­çš„ä¸»æœºå’Œè·¯ç”±å™¨;
> - BGP è¿žæŽ¥ (BGP connection): æ¯æ¡ç›´æŽ¥è¿žæŽ¥ä»¥åŠæ‰€æœ‰é€šè¿‡è¯¥è¿žæŽ¥å‘é€çš„ BGP æŠ¥æ–‡ç§°ä¸º BGP è¿žæŽ¥;
>     - å¤–éƒ¨ BGP è¿žæŽ¥ (eBGP connection): è·¨è¶Šä¸¤ä¸ª AS çš„ BGP è¿žæŽ¥;
>     - å†…éƒ¨ BGP è¿žæŽ¥ (iBGP connection): åŒä¸€ AS å†…éƒ¨çš„ä¸¤å°è·¯ç”±å™¨ä¹‹é—´çš„ BGP è¿žæŽ¥;
>         - iBGP è¿žæŽ¥å¹¶ä¸æ€»æ˜¯ä¸Žä¸€æ¡å•ç‹¬çš„ç‰©ç†é“¾è·¯ç›¸å¯¹åº” (å› ä¸ºæ˜¯åŸºäºŽ TCP è¿žæŽ¥);
>
> ---
>
> ###### BGP å±žæ€§ (BGP attributes)
>
> - BGP æœ¯è¯­: è·¯ç”± (route) = å‰ç¼€ (prefix) + å±žæ€§ (BGP attributes)
> - BGP å±žæ€§
>     - `AS-PATH` : è¯¥å‰ç¼€çš„é€šå‘Šå·²ç»ç»è¿‡çš„ AS åˆ—è¡¨;
>         - å¯ç”¨äºŽæ£€æµ‹å’Œé˜²æ­¢é€šå‘ŠçŽ¯è·¯
>             - å½“ä¸€ä¸ª AS å‘çŽ° `AS-PATH` ä¸­åŒ…å«è‡ªå·±æ—¶, è¯´æ˜Žé‡åˆ°äº†çŽ¯è·¯, è¯¥é€šå‘Šå°†ä¼šè¢«æ­¤ AS æ‹’ç»;
>
>         - å¯ç”¨äºŽå®žçŽ°å¤šè·¯å¾„é€‰æ‹©;
>         - åœ¨ä½¿ç”¨ eBGP æŠ¥æ–‡è½¬å‘æ—¶, éœ€è¦åœ¨å‰é¢åŠ ä¸Šè‡ªå·±çš„ ASN (AS å·);
>
>     - `NEXT-HOP` : `AS-PATH` èµ·å§‹çš„è·¯ç”±å™¨æŽ¥å£çš„åœ°å€;
>         - ä»…åœ¨ä½¿ç”¨ eBGP è¿›è¡Œè½¬å‘æ—¶ä¿®æ”¹, æ”¹ä¸º eBGP å‘é€æ–¹å‘é€ç«¯å£çš„åœ°å€, ä»Žè€ŒæŒ‡ç¤º eBGP æŽ¥æ”¶æ–¹å¦‚ä½•è½¬å‘åˆ†ç»„;
>             - å‘å‰è¿°æ›´æ”¹åŽçš„åœ°å€è½¬å‘, å³è¿™æ¡ eBGP å‘æ¥çš„æ–¹å‘å€’å›žåŽ»è½¬å‘;
>         - ä½¿ç”¨ iBGP æ—¶ä¸ä¿®æ”¹æ­¤å±žæ€§;
>         
>     - å…¶ä»–å±žæ€§: ä¾‹å¦‚è·¯ç”±åå¥½ç­‰;
>
>
> ---
>
> ###### ä¾‹å­ 1
>
> - åŒæ ·ä½¿ç”¨ä¸Šå›¾, å‡è®¾ AS 3 ä¸­åŒ…å« CIDR å‰ç¼€ä¸º x çš„å­ç½‘;
> - é€šè¿‡ä»¥ä¸‹æ­¥éª¤, AS 1/2/3 ä¸­çš„æ‰€æœ‰è·¯ç”±å™¨éƒ½å°†å¾—çŸ¥è¯¥å­ç½‘ x çš„å­˜åœ¨ä»¥åŠè·¯ç”±è·¯å¾„;
>     1. 3a é€šè¿‡ eBGP, å‘ 2c é€šå‘Š `AS3 x` , å¹¶å°† `NEXT-HOP` ä¿®æ”¹ä¸ºæœ¬é€šå‘Šçš„å‘é€ç«¯å£çš„ IP åœ°å€;
>     2. 2c é€šè¿‡ iBGP, å‘ AS 2 ä¸­çš„æ‰€æœ‰å…¶ä»–è·¯ç”±å™¨é€šå‘Š `AS3 x` , ä¸ä¿®æ”¹ `NEXT-HOP` å­—æ®µ;
>     3. 2a é€šè¿‡ eBGP, å‘ 1c é€šå‘Š `AS2 AS3 x` , å¹¶å°† `NEXT-HOP` ä¿®æ”¹ä¸ºæœ¬é€šå‘Šçš„å‘é€ç«¯å£çš„ IP åœ°å€;
>     4. 1c é€šè¿‡ iBGP, å‘ AS 1 ä¸­çš„æ‰€æœ‰å…¶ä»–è·¯ç”±å™¨é€šå‘Š `AS2 AS3 x` , ä¸ä¿®æ”¹ `NEXT-HOP` å­—æ®µ;
>
> ---
>
> ###### ä¾‹å­ 2
>
> - ä¸€èˆ¬æƒ…å†µä¸‹, å¯èƒ½æœ‰ä¸åŒçš„è·¯å¾„, ä¸‹å›¾å­˜åœ¨ä¸¤æ¡è·¯å¾„
>     <left><img src="assets/image-20220526215426836.png" alt="image-20220526215426836" style="zoom:50%;" /></left>
>
>     - `AS2 AS3 x`
>     - `AS3 x`

----

### ç¡®å®šæœ€å¥½çš„è·¯ç”±çš„æ–¹æ³•

#### ç®€å•çš„æ–¹æ³•: çƒ­åœŸè±†è·¯ç”±é€‰æ‹© (hot potato routing)

> ###### æ€è·¯
>
> - é€‰æ‹©å…·æœ‰æœ€å°çš„ AS å†…éƒ¨å¼€é”€çš„ç½‘å…³, ä½œä¸ºæœ€ç»ˆçš„å‡ºå£;
> - ä¸å…³å¿ƒåŸŸé—´çš„å¼€é”€, åªå…³å¿ƒ AS å†…éƒ¨å¼€é”€;
>
> ---
>
> ###### æ­¥éª¤
>
> 1. æ ¹æ® AS é—´åè®® (BGP), å¾—çŸ¥ç»è¿‡å“ªäº› AS å¯ä»¥åˆ°è¾¾å­ç½‘ x , è¿›è€Œå¾—çŸ¥å¯ä»¥ç»ç”±æœ¬åœ° AS çš„**å“ªäº›**ç½‘å…³å¯ä»¥è·¯ç”±è‡³å­ç½‘ x ;
> 2. æ ¹æ® AS å†…çš„è·¯ç”±é€‰æ‹©åè®®, è®¡ç®—åˆ°è¾¾è¿™äº›ç½‘å…³çš„æœ€ä½Žå¼€é”€;
> 3. åœ¨è¿™äº›æœ€ä½Žå¼€é”€ä¹‹é—´, é€‰æ‹©æœ€å°çš„ä¸€ä¸ª;
> 4. ä»Žè½¬å‘è¡¨ (è½¬å‘è¡¨å·²æå‰ç”± AS å†…è·¯ç”±é€‰æ‹©ç®—æ³•ç¡®å®š) ç¡®å®šç«¯å£ `I` , è¯¥ç«¯å£é€šå¾€è¯¥æœ€å°æœ€ä½Žå¼€é”€å¯¹åº”çš„ç½‘å…³, è¿›è€Œä»Žè½¬å‘è¡¨ä¸­è®°å½•è¡¨é¡¹ `(x, I)` ;
>
> ---
>
> ###### ä¾‹å­
>
> <left><img src="assets/image-20220526215426836.png" alt="image-20220526215426836" style="zoom:50%;" /></left>
>
> - ä»Ž 1b åˆ°å­ç½‘ x ;
> - æ­¥éª¤
>     1. æ ¹æ® BGP, å¾—çŸ¥ `AS2 AS3 x` æˆ– `AS3 x` ä¸¤æ¡è·¯å¾„å¯ä»¥åˆ°è¾¾ x ;
>     2. ç¡®å®š 1b åˆ°è¾¾è¿™äº›è·¯å¾„å¯¹åº”çš„ç½‘å…³çš„æœ€ä½Žå¼€é”€:
>         -  `AS2 AS3 x` : å‡è®¾ 1b -> 1c å¼€é”€æœ€ä½Ž, å‡è®¾ä¸º 5 ;
>         -  `AS3 x` : å‡è®¾ 1b->1c->1d å¼€é”€æœ€ä½Ž, å‡è®¾ä¸º 7 ;
>     3. é€‰æ‹©è¿™äº›æœ€ä½Žå¼€é”€ä¸­æœ€å°çš„ä¸€ä¸ª: $min\{5, 7\}=5$ , å¯¹åº”ç½‘å…³ 1c ;
>     4. æ ¹æ®å·²ç»ç¡®å®šå¥½çš„è½¬å‘è¡¨, å¾—çŸ¥è¦æƒ³å°†åˆ†ç»„ä»Ž 1b è½¬å‘è‡³ç½‘å…³ 1c, éœ€è¦è½¬å‘åˆ†ç»„è‡³ç«¯å£ `I` , åˆ™è®°å½•è½¬å‘è¡¨é¡¹: `(x, I)` ;

#### BGP å®žé™…ä½¿ç”¨çš„ç®—æ³•: è·¯ç”±å™¨é€‰æ‹©ç®—æ³•

> ###### è¾“å…¥
>
> - åˆ°æŸä¸ªå‰ç¼€ x çš„æ‰€æœ‰è·¯ç”±çš„é›†åˆ: é€šè¿‡ BGP åè®®å¾—åˆ°çš„ä¸åŒè·¯å¾„;
>
> ---
>
> ###### ç­›é€‰
>
> - å¦‚æžœè¾“å…¥åªæœ‰ä¸€æ¡è·¯å¾„, åˆ™åªèƒ½é€‰ç”¨è¯¥è·¯å¾„;
> - å¦‚æžœè¾“å…¥å…·æœ‰å¤šæ¡è·¯å¾„, åˆ™é€šè¿‡ä»¥ä¸‹è§„åˆ™é¡ºåºä¸æ–­ç­›é€‰, ç›´åˆ°åªå‰©ä¸‹ä¸€æ¡è·¯å¾„;
>     1. æœ¬åœ°åå¥½ (local preference) å±žæ€§
>         - æ˜¯ BGP å±žæ€§ä¹‹ä¸€ (ä¸Ž `NEXT-HOP` , `AS-PATH` å¹¶åˆ—);
>         - å…·æœ‰æœ€é«˜æœ¬åœ°åå¥½å€¼çš„è·¯ç”±å°†è¢«é€‰æ‹©;
>         - å½“å¤šä¸ªè·¯ç”±éƒ½å…·æœ‰ç›¸åŒçš„æœ€é«˜çš„æœ¬åœ°åå¥½å€¼æ—¶, è¿›å…¥ä¸‹ä¸€æ¡è§„åˆ™;
>     2. `AS-PATH` è·³æ•°
>         - ä¼˜å…ˆé€‰æ‹©å…·æœ‰æœ€å°‘ `AS-PATH` è·³æ•°çš„è·¯ç”±;
>         - æœ¬è§„åˆ™æ˜¯å¦æ˜¯å”¯ä¸€çš„è§„åˆ™
>             - BGP å°†ä½¿ç”¨ç±»ä¼¼ DV ç®—æ³•çš„æ–¹æ³•, è®¡ç®—è·¯å¾„é•¿åº¦, åªæ˜¯è¿™é‡Œçš„æµ‹åº¦æ˜¯ AS è·³æ•°, è€Œä¸æ˜¯è·¯ç”±å™¨è·³æ•°;
>         - å¦‚æžœ `AS-PATH` è·³æ•°ä»ç›¸åŒ, è¿›å…¥ä¸‹ä¸€æ¡è§„åˆ™;
>     3. æœ€ä½Žå†…éƒ¨å¼€é”€ (åŒçƒ­åœŸè±†)
>         - åˆ°è¾¾æ­¤å¤„çš„æ‰€æœ‰è·¯ç”±å…·æœ‰ç›¸åŒçš„æœ¬åœ°åå¥½å€¼å’Œ `AS-PATH` è·³æ•°;
>         - ä½¿ç”¨çƒ­åœŸè±†ç®—æ³•, é€‰ç”¨å†…éƒ¨æœ€ä½Žå¼€é”€æœ€å°çš„ç½‘å…³;
>         - å¦‚æžœä»ç„¶å‰©ä¸‹å¤šæ¡è·¯ç”±, åˆ™è¿›å…¥ä¸‹ä¸€æ¡è§„åˆ™;
>     4. BGP æ ‡è¯†ç¬¦

---

### IP ä»»æ’­ (IP anycast)

> ###### æ¦‚è¿°
>
> - å¤šä¸ªæœåŠ¡å™¨é€šå‘Šç›¸åŒçš„ IP åœ°å€, è¿™äº›æœåŠ¡å™¨å¯èƒ½ä½äºŽä¸åŒçš„ç‰©ç†ä½ç½®;
> - BGP æ”¶åˆ°åŽ, ä¼šäº§ç”Ÿé’ˆå¯¹ç›¸åŒç›®çš„ IP çš„å¤šä¸ªè½¬å‘è¡¨é¡¹;
>     - è™½ç„¶ç›®çš„ IP ç›¸åŒ, ä½†æ˜¯å®žé™…å¯¼å‘çš„æœåŠ¡å™¨æ˜¯ä¸åŒçš„;
> - å½“å®¢æˆ·è®¿é—®è¯¥ IP æ—¶, åœ¨è·¯ç”±å±‚é¢ä¸Š (ç½‘ç»œå±‚), åˆ†ç»„ä¼šåœ¨è·¯ç”±é€‰æ‹©åè®®çš„å¼•å¯¼ä¸‹, å¯¼å‘ä¸€äº›å¼€é”€æ›´ä½Žçš„æœåŠ¡å™¨;
> - è¢«ç”¨åœ¨ DNS ç³»ç»Ÿ: å°† DNS è¯·æ±‚æŒ‡å‘è·ç¦»ç”¨æˆ·æœ€è¿‘ (ä¸€èˆ¬è¿‘çš„å¼€é”€å°±ä½Ž) çš„ DNS æ ¹æœåŠ¡å™¨;
>     - DNS æ ¹æœåŠ¡å™¨åªæœ‰ 13 ä¸ª IP åœ°å€, ä½†å´æœ‰ä¸Šç™¾ä¸ªæœåŠ¡å™¨åˆ†å¸ƒåœ¨ä¸–ç•Œå„å¤„;
>
> ---
>
> ###### ä¼˜ç‚¹
>
> - å†—ä½™, æé«˜å¯é æ€§;
> - æé«˜ç”¨æˆ·ä½“éªŒ;
> - é˜²èŒƒ DoS æ”»å‡», ä¸”æå‡å®‰å…¨æ€§;

---

### è·¯ç”±é€‰æ‹©ç­–ç•¥

> <left><img src="assets/image-20220527201549556.png" alt="image-20220527201549556" style="zoom:50%;" /></left>
>
> - x, y, w æ˜¯æ¡©ç½‘ç»œ (stub networks; ç«¯ç½‘ç»œ);
> - æƒ…å†µ 1: A å‘ B, C é€šå‘Šè·¯å¾„ Aw
>     - B å†³å®šä¸å†ç»§ç»­å‘ C é€šå‘Šè·¯å¾„ BAw, å› ä¸º B æ— æ³•ä»Ž CBAw çš„è·¯ç”±ä¸ŠèŽ·å–åˆ©ç›Š (å› ä¸º C, A, w éƒ½ä¸æ˜¯ B çš„å®¢æˆ·);
>     - C åªèƒ½é€šè¿‡ CAw åˆ°è¾¾ w, è€Œæ— æ³•ç»è¿‡ B;
> - æƒ…å†µ 2: x ä¸æƒ³è·¯ç”± B ä¸Ž C ä¹‹é—´çš„åˆ†ç»„
>     - x æ˜¯å¤šå®¿æ¡©ç½‘ç»œ: æŽ¥å…¥äº†ä¸¤ä¸ª ISP;
>     - x é€‰æ‹©ä¸å‘ B é€šå‘Šè·¯å¾„ BxC, å› ä¸ºé‚£æ˜¯ ISP ä¸»å¹²ç½‘çš„å·¥ä½œ, è‡ªå·±æ˜¯å®¢æˆ·;

---

## Â§ 5.5 SDN æŽ§åˆ¶å¹³é¢

> ###### æ¦‚è¿°
>
> - æ¦‚å¿µ: (åˆ†ç»„) äº¤æ¢æœº = (ç½‘ç»œå±‚) è·¯ç”±å™¨ and é“¾è·¯å±‚åˆ†ç»„äº¤æ¢æœº;
> - SDN æŽ§åˆ¶å¹³é¢çš„åŠŸèƒ½: è®¡ç®—, ç®¡ç†å’Œå®‰è£…æ‰€æœ‰ç½‘ç»œäº¤æ¢æœºä¸­çš„æµè¡¨é¡¹;
>
> ---
>
> ###### SDN æŽ§åˆ¶å¹³é¢çš„ä¸¤ä¸ªç»„ä»¶
>
> <left><img src="assets/image-20220527214849383.png" alt="image-20220527214849383" style="zoom:50%;" /></left>
>
> - SDN æŽ§åˆ¶å™¨ (æˆ–ç½‘ç»œæ“ä½œç³»ç»Ÿ)
>     - åŠŸèƒ½: ç»´æŠ¤å‡†ç¡®çš„ç½‘ç»œçš„çŠ¶æ€ä¿¡æ¯, ä¾‹å¦‚: é“¾è·¯, äº¤æ¢æœºå’Œç«¯ç³»ç»Ÿçš„çŠ¶æ€ç­‰, å¹¶å‘ç½‘ç»œæŽ§åˆ¶åº”ç”¨ç¨‹åºæä¾›è¿™äº›ä¿¡æ¯;
> - ç½‘ç»œæŽ§åˆ¶åº”ç”¨ç¨‹åº
>     - æœ‰å¤šä¸ª, æ˜¯å¯ç¼–ç¨‹çš„;
>     - ä¾‹å¦‚: è´Ÿè½½å‡è¡¡, è·¯ç”±é€‰æ‹©, æŽ¥å…¥æŽ§åˆ¶, è®¿é—®æŽ§åˆ¶......
>
> ---
>
> ###### SDN ä½“ç³»ç»“æž„çš„å››ä¸ªç‰¹å¾
>
> 1. åŸºäºŽæµçš„è½¬å‘
>     - SDN æŽ§åˆ¶çš„äº¤æ¢æœºçš„åˆ†ç»„è½¬å‘å·¥ä½œ, èƒ½å¤ŸåŸºäºŽè¿è¾“å±‚, ç½‘ç»œå±‚æˆ–é“¾è·¯å±‚é¦–éƒ¨ä¸­ä»»æ„æ•°é‡çš„é¦–éƒ¨å­—æ®µå€¼è¿›è¡Œ;
>     - ä¾‹å¦‚: OpenFlow 1.0 å…è®¸åŸºäºŽ 11 ä¸ªä¸åŒçš„é¦–éƒ¨å­—æ®µå€¼è¿›è¡Œè½¬å‘, è€Œä¼ ç»Ÿçš„ IP æ•°æ®æŠ¥è½¬å‘ä»…ä»…åŸºäºŽç›®çš„ IP åœ°å€;
> 2. æ•°æ®å¹³é¢ä¸ŽæŽ§åˆ¶å¹³é¢åˆ†ç¦»;
>     - æ•°æ®å¹³é¢: ç”±ç½‘ç»œäº¤æ¢æœºç»„æˆ, äº¤æ¢æœºæ‰§è¡Œ "åŒ¹é…+åŠ¨ä½œ";
>     - æŽ§åˆ¶å¹³é¢: æœåŠ¡å™¨ + (ç”¨äºŽå†³å®šå’Œç®¡ç†äº¤æ¢æœºä¸­çš„æµè¡¨çš„)è½¯ä»¶;
> 3. ç½‘ç»œæŽ§åˆ¶åŠŸèƒ½ä½äºŽæ•°æ®å¹³é¢äº¤æ¢æœºçš„å¤–éƒ¨
>     - SDN æŽ§åˆ¶å¹³é¢ç”±è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„è½¯ä»¶å®žçŽ°, ä¸Žæ•°æ®å¹³é¢çš„äº¤æ¢æœºåˆ†ç¦»;
> 4. å¯ç¼–ç¨‹çš„ç½‘ç»œ
>     - ç½‘ç»œæŽ§åˆ¶åº”ç”¨ç¨‹åºæ˜¯å¯ä»¥ç¼–ç¨‹çš„;
>     - äº¤æ¢æœº, SDN æŽ§åˆ¶å™¨, ç½‘ç»œæŽ§åˆ¶åº”ç”¨ç¨‹åºç›¸äº’åˆ†ç¦», å¯ä»¥æ¥è‡ªä¸åŒçš„åŽ‚å•†, å¸¦æ¥çš„ä¸°å¯Œä¸”å¼€æ”¾çš„ç”Ÿæ€ç³»ç»Ÿ;

### SDN æŽ§åˆ¶å™¨

> ###### ç»“æž„
>
> <left><img src="assets/image-20220527215611926.png" alt="image-20220527215611926" style="zoom:50%;" /></left>
>
> - ç¬¬ä¸€å±‚: å¯¹ç½‘ç»œæŽ§åˆ¶åº”ç”¨ç¨‹åºçš„æŽ¥å£
>     - SDN æŽ§åˆ¶å™¨ä¸Žç½‘ç»œæŽ§åˆ¶åº”ç”¨ç¨‹åºä¹‹é—´çš„æŽ¥å£ (æä¾›ç»™å…¶ä»–åŽ‚å®¶è¿›è¡ŒæŽ¥å…¥å’Œç®¡ç†çš„æŽ¥å£), è¢«ç§°ä¸º**åŒ—å‘æŽ¥å£ (åŒ—å‘ API)**;
>         - åŒ—å‘ API å…è®¸ç½‘ç»œæŽ§åˆ¶åº”ç”¨ç¨‹åºç®¡ç†ç½‘ç»œçŠ¶æ€å’Œæµè¡¨;
>         - ä¾‹å¦‚: REST è¯·æ±‚å“åº”æŽ¥å£;
> - ç¬¬äºŒå±‚: ç½‘ç»œçŠ¶æ€ç®¡ç†å±‚
>     - ç»´æŠ¤å„ç§ç»Ÿè®¡ä¿¡æ¯, çŠ¶æ€ä¿¡æ¯, æµè¡¨çš„æ‹·è´, å®žçŽ°ç½‘ç»œèŒƒå›´çš„, åˆ†å¸ƒå¼çš„, å¥å£®çš„çŠ¶æ€ç®¡ç†;
> - ç¬¬ä¸‰å±‚: é€šä¿¡å±‚
>     - ä½¿ç”¨ç‰¹å®šçš„åè®®, è´Ÿè´£åœ¨ SDN æŽ§åˆ¶å™¨å’Œå—æŽ§è®¾å¤‡ä¹‹é—´ä¼ é€’ä¿¡æ¯;
>         - é€šè¿‡è¯¥ "ç‰¹å®šçš„åè®®" :
>             - SDN æŽ§åˆ¶å™¨å¯ä»¥å‘å—æŽ§è®¾å¤‡å‘é€æŽ§åˆ¶ä¿¡æ¯;
>             - å—æŽ§è®¾å¤‡å¯ä»¥è§‚å¯Ÿåˆ°äº‹ä»¶ (ä¾‹å¦‚: æ–°çš„é“¾è·¯æˆ–è€…è®¾å¤‡çš„æŽ¥å…¥), å¹¶ä¸»åŠ¨ä¸ŠæŠ¥ SDN æŽ§åˆ¶å™¨ä»¥ç»´æŠ¤æœ€æ–°çš„ç½‘ç»œè§†å›¾;
>         - OpenFlow å°±æ˜¯æä¾›è¿™ç§åŠŸèƒ½çš„åè®®, ä¸ºå¤§å¤šæ•° SDN æŽ§åˆ¶å™¨ä½¿ç”¨;
>     - å—æŽ§è®¾å¤‡å’Œ SDN æŽ§åˆ¶å™¨ä¹‹é—´çš„æŽ¥å£, è¢«ç§°ä¸º**å—å‘æŽ¥å£ (å—å‘ API)**;
>
> ---
>
> ###### å®žçŽ°
>
> - é€»è¾‘ä¸Šè§†ä¸ºå•ä¸€çš„, æ•´ä½“çš„æœåŠ¡;
> - å®žé™…ä¸Š, è¿™äº›ä¿æŒçŠ¶æ€ä¿¡æ¯çš„æ•°æ®åº“ä¸€èˆ¬é€šè¿‡åˆ†å¸ƒå¼çš„æœåŠ¡å™¨å®žçŽ°;
>     - ä¿è¯å¥å£®æ€§, å¯ç”¨æ€§, é«˜æ€§èƒ½;
>     - å› ä¸ºæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ, æ‰€ä»¥éœ€è¦è€ƒè™‘æŽ§åˆ¶å™¨å†…éƒ¨çš„ä¸€è‡´æ€§, é€»è¾‘æ—¶é—´é¡ºåº, æ„è§ä¸€è‡´ç­‰é—®é¢˜;

---

### OpenFlow åè®®

> ###### æ¦‚è¿°
>
> - è¿è¡Œåœ¨ SDN æŽ§åˆ¶å™¨, å—æŽ§çš„åˆ†ç»„äº¤æ¢æœº, ä»¥åŠä¸€äº›å®žçŽ° OpenFlow API çš„è®¾å¤‡ä¹‹é—´;
> - è¿è¡Œåœ¨ TCP ä¸Š, ä½¿ç”¨ 6653 é»˜è®¤ç«¯å£å·;
>
> ----
>
> ###### æŠ¥æ–‡å†…å®¹
>
> - SDN æŽ§åˆ¶å™¨ $\rightarrow$ å—æŽ§è®¾å¤‡
>
>     - é…ç½®: æŸ¥è¯¢å¹¶è®¾ç½®äº¤æ¢æœºçš„é…ç½®å‚æ•°;
>
>     - ä¿®æ”¹çŠ¶æ€: å¢žåŠ  / åˆ é™¤ / ä¿®æ”¹ äº¤æ¢æœºæµè¡¨ä¸­çš„è¡¨é¡¹, å¹¶ä¸”è®¾ç½®äº¤æ¢æœºç«¯å£ç‰¹æ€§;
>
>     - è¯»çŠ¶æ€: ä»Žäº¤æ¢æœºçš„æµè¡¨å’Œç«¯å£æ”¶é›†ç»Ÿè®¡æ•°æ®å’Œè®¡æ•°å™¨å€¼;
>
>     - å‘é€åˆ†ç»„: åœ¨å—æŽ§äº¤æ¢æœºä»Žç‰¹å®šçš„ç«¯å£å‘é€å‡ºä¸€ä¸ªç‰¹å®šçš„æŠ¥æ–‡;
>
> - å—æŽ§è®¾å¤‡ $\rightarrow$ SDN æŽ§åˆ¶å™¨
>
>     - æµåˆ é™¤: é€šçŸ¥æŽ§åˆ¶å™¨å·²åˆ é™¤ä¸€ä¸ªæµè¡¨é¡¹;
>         - ä¾‹å¦‚: ç”±äºŽè¶…æ—¶, æˆ–ä½œä¸ºæ”¶åˆ° â€œä¿®æ”¹çŠ¶æ€â€ æŠ¥æ–‡çš„ç»“æžœ;
>     - ç«¯å£çŠ¶æ€: å‘æŽ§åˆ¶å™¨é€šçŸ¥ç«¯å£çŠ¶æ€çš„å˜åŒ–;
>     - åˆ†ç»„å…¥: ç”¨äºŽå°†åˆ†ç»„å‘é€ç»™æŽ§åˆ¶å™¨;
>         - å½“ä¸€ä¸ªåˆ†ç»„åˆ°è¾¾äº¤æ¢æœºç«¯å£, å¹¶ä¸”ä¸èƒ½ä¸Žä»»ä½•æµè¡¨é¡¹åŒ¹é…, é‚£ä¹ˆè¿™ä¸ªåˆ†ç»„å°†è¢«å‘é€ç»™æŽ§åˆ¶å™¨è¿›è¡Œé¢å¤–å¤„ç†;
>         - åŒ¹é…çš„åˆ†ç»„ä¹Ÿå¯èƒ½è¢«å‘é€ç»™æŽ§åˆ¶å™¨, ä½œä¸ºåŒ¹é…æ—¶æ‰€é‡‡å–çš„ä¸€ä¸ªåŠ¨ä½œ;

---

## Â§ 5.6 ICMP (Internet Control Message Protocol, å› ç‰¹ç½‘æŽ§åˆ¶æŠ¥æ–‡åè®®)

> ###### æ¦‚è¿°
>
> - ç”¨äºŽåœ¨ä¸»æœºå’Œè·¯ç”±å™¨ä¹‹é—´æ²Ÿé€šç½‘ç»œå±‚çš„ä¿¡æ¯;
> - é€šå¸¸è¢«è®¤ä¸ºæ˜¯ IP çš„ä¸€éƒ¨åˆ†, ä½†æ˜¯å®ƒæ‰¿è½½åœ¨ IP æŠ¥æ–‡ä¸­, ä½œä¸º IP æŠ¥æ–‡çš„æœ‰æ•ˆè½½è·, æ‰€ä»¥æ˜¯å·¥ä½œåœ¨ IP ä¹‹ä¸Šçš„;
>
> ---
>
> ###### ICMP æŠ¥æ–‡
>
> - ç±»åž‹å­—æ®µ + ç¼–ç å­—æ®µ:
>
>     | ç±»åž‹å­—æ®µ | ç¼–ç å­—æ®µ | å«ä¹‰                       |
>     | -------- | -------- | -------------------------- |
>     | 0        | 0        | å›žæ˜¾å›žç­” (å¯¹ ping çš„å›žç­”); |
>     | 3        | 0        | ç›®çš„ç½‘ç»œä¸å¯è¾¾;            |
>     | 3        | 1        | ç›®çš„ä¸»æœºä¸å¯è¾¾;            |
>     | 3        | 2        | ç›®çš„åè®®ä¸å¯è¾¾;            |
>     | 3        | 3        | ç›®çš„ç«¯å£ä¸å¯è¾¾;            |
>     | 3        | 6        | ç›®çš„ç½‘ç»œæœªçŸ¥;              |
>     | 3        | 7        | ç›®çš„ä¸»æœºæœªçŸ¥;              |
>     | 4        | 0        | æºæŠ‘åˆ¶ (æ‹¥å¡žæŽ§åˆ¶);         |
>     | 8        | 0        | å›žæ˜¾è¯·æ±‚;                  |
>     | 9        | 0        | è·¯ç”±å™¨é€šå‘Š;                |
>     | 10       | 0        | è·¯ç”±å™¨å‘çŽ°;                |
>     | 11       | 0        | TTL è¿‡æœŸ;                  |
>     | 12       | 0        | IP é¦–éƒ¨æŸå;               |
>
> - å¼•å‘é”™è¯¯çš„æŠ¥æ–‡çš„é¦–éƒ¨å’Œå‰ 8 Byte: ç”¨äºŽæ–¹ä¾¿å‘é€æ–¹ç¡®å®šå¼•å‘é”™è¯¯çš„æ•°æ®æŠ¥;
>
> ---
>
> ###### åº”ç”¨
>
> - Traceroute ç¨‹åº;
>     - ä½¿ç”¨ UDP, å‘ç›®çš„ä¸»æœºå‘é€ä¸€ç³»åˆ— IP æ•°æ®æŠ¥, åˆ†åˆ«è®¾ç½® TTL = 1, 2, 3, ......
>         - è¯¥æ•°æ®æŠ¥åŒ…å«ä¸€ä¸ªä¸å¯è¾¾çš„ç«¯å£å·, å½“æ”¶åˆ°æ¥è‡ªç›®æ ‡ä¸»æœºçš„ç›®çš„ç«¯å£ä¸å¯è¾¾çš„ ICMP æŠ¥æ–‡æ—¶, åœæ­¢å‘é€è¿™äº›æŽ¢æµ‹åˆ†ç»„;
>     - ä¼šæ”¶åˆ°è·¯å¾„ä¸Šè·¯ç”±å™¨çš„ ICMP æŠ¥æ–‡, æŒ‡ç¤º TTL è¿‡æœŸ, Traceroute æ®æ­¤èŽ·å¾—è·¯å¾„ä¸Šçš„è·¯ç”±;
> - Ping;

---

## Â§ 5.7 ç½‘ç»œç®¡ç†å’Œ SNMP

> ###### ç½‘ç»œç®¡ç†
>
> - ç½‘ç»œç®¡ç†åŒ…æ‹¬äº†ç¡¬ä»¶ã€è½¯ä»¶å’Œäººç±»å…ƒç´ çš„è®¾ç½®ã€ç»¼åˆå’Œåè°ƒ, ä»¥ç›‘è§†ã€æµ‹è¯•ã€è½®è¯¢ã€é…ç½®ã€åˆ†æžã€è¯„ä»·å’ŒæŽ§åˆ¶ç½‘ç»œåŠç½‘å…ƒèµ„æº, ç”¨åˆç†çš„æˆæœ¬æ»¡è¶³å®žæ—¶æ€§ã€è¿è¥æ€§èƒ½å’ŒæœåŠ¡è´¨é‡çš„è¦æ±‚;

### ç½‘ç»œç®¡ç†æ¡†æž¶

> <left><img src="assets/image-20220529114040397.png" alt="image-20220529114040397" style="zoom:50%;" /></left>
>
> - ç®¡ç†æœåŠ¡å™¨ (managing server): æ˜¯æ‰§è¡Œç½‘ç»œç®¡ç†çš„è½¯ä»¶, ç®¡ç†å‘˜åœ¨è¿™é‡Œå‘èµ·æŽ§åˆ¶åŠ¨ä½œ;
> - è¢«ç®¡è®¾å¤‡ (managed device): å…¶ä¸­åŒ…å« è¢«ç®¡å¯¹è±¡ (managed object), ä¾‹å¦‚: è®¾å¤‡ä¸­çš„ä¸€ä¸ªæŽ¥å£å¡, ä¸€ä¸ªé…ç½®å‚æ•°;
> - ç®¡ç†ä¿¡æ¯åº“ (Management Information Base, MIB): æ”¶é›†è¢«ç®¡å¯¹è±¡çš„å…³è”ä¿¡æ¯, ä¾›ç®¡ç†æœåŠ¡å™¨ä½¿ç”¨;
>     - MIB å¯¹è±¡ç§°ä¸º SMI (Structure of Management Information);
> - ç½‘ç»œç®¡ç†ä»£ç† (network management agent): è¿è¡Œåœ¨è¢«ç®¡è®¾å¤‡ä¸­çš„ä¸€ä¸ªè¿›ç¨‹, ä¸Žç®¡ç†æœåŠ¡å™¨é€šä¿¡å¹¶ä½¿è®¾å¤‡æ‰§è¡Œå¯¹åº”çš„æŽ§åˆ¶åŠ¨ä½œ;
> - ç½‘ç»œç®¡ç†åè®® (network management protocol): åè®®æœ¬èº«ä¸èƒ½ç®¡ç†ç½‘ç»œ, ä½†æ˜¯èƒ½å¤Ÿè®©ç½‘ç»œç®¡ç†å‘˜ç®¡ç†ç½‘ç»œ;

---

### SNMP (Simple Network Management Protocol, ç®€å•ç½‘ç»œç®¡ç†åè®®)

> ###### æ¦‚è¿°
>
> - åº”ç”¨å±‚åè®®, å…¶æŠ¥æ–‡é€šå¸¸ä½œä¸º UDP çš„æœ‰æ•ˆè½½è·è¿›è¡Œä¼ è¾“;
>     - ä½¿ç”¨è¯·æ±‚ ID (ç±»ä¼¼äºŽ TCP ä¸­çš„åºå·), åœ¨ä½¿ç”¨ UDP çš„å‰æä¸‹å®žçŽ°å¯¹ä¸¢å¤±çš„è¯·æ±‚æˆ–å“åº”çš„æ£€æµ‹;
> - ç”¨äºŽç®¡ç†æœåŠ¡å™¨å’Œç½‘ç»œç®¡ç†ä»£ç†ä¹‹é—´,ä¼ é€’ç½‘ç»œç®¡ç†æŽ§åˆ¶å’Œä¿¡æ¯çš„æŠ¥æ–‡;
>
> ---
>
> ###### ä¸¤ç§ç»å…¸çš„æ¨¡å¼
>
> - è¯·æ±‚å“åº”æ¨¡å¼: SNMP ç®¡ç†æœåŠ¡å™¨å‘ SNMP ä»£ç†å‘é€è¯·æ±‚, ä»£ç†æ”¶åˆ°è¯·æ±‚åŽæ‰§è¡ŒåŠ¨ä½œ, ç„¶åŽå¯¹è¯¥è¯·æ±‚å‘é€ä¸€ä¸ªå“åº”;
> - é™·é˜± (trap) æ¨¡å¼
>     - SNMP ä»£ç†å‘ SNMP ç®¡ç†æœåŠ¡å™¨å‘é€ä¸€ç§éžè¯·æ±‚æŠ¥æ–‡ (è¢«ç§°ä¸º: é™·é˜±æŠ¥æ–‡, trap message), ç”¨äºŽé€šçŸ¥ç”±äºŽå¼‚å¸¸æƒ…å†µè€Œå¯¼è‡´çš„ SMI çš„æ”¹å˜;
>     - é™·é˜±æŠ¥æ–‡æ˜¯å¼‚æ­¥äº§ç”Ÿçš„, æ˜¯ä¸ºäº†å“åº”ç®¡ç†æœåŠ¡å™¨æ‰€è¦æ±‚é€šçŸ¥çš„äº‹ä»¶è€Œäº§ç”Ÿçš„;
>
> ---
>
> ###### SNMPv2 çš„æŠ¥æ–‡ (åè®®æ•°æ®å•å…ƒ, PDU) ç±»åž‹
>
> <left><img src="assets/image-20220529120013202.png" alt="image-20220529120013202" style="zoom:50%;" /></left>
>
> ---
>
> ###### SNMP PDU æ ¼å¼
>
> <left><img src="assets/image-20220529120122495.png" alt="image-20220529120122495" style="zoom:50%;" /></left>

---

